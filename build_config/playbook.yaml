---
- name: 'Provision Image'
  hosts: all
  tasks:
  - include_role:
    - name: esml
      vars:
        git_repo: https://github.com/jostrm/azure-enterprise-scale-ml.git
    - name: linux-packages
      vars:
        install_from_source: [{'name': 'python36', 'url': 'https://www.python.org/ftp/python/3.6.10/Python-3.6.10.tgz'}, {'name': 'packages-microsoft-prod', 'url': 'https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb'}]
        install_scripts: [{'name': 'miniconda', 'url': 'https://repo.anaconda.com/miniconda/Miniconda3-py39_4.11.0-Linux-x86_64.sh', 'checksum': '4ee9c3aa53329cd7a63b49877c0babb49b19b7e5af29807b793a76bdb1d362b4', 'installation_arg': '-b'}]
        download_binaries: []
        gpg_packages: [{'name': 'azure-cli', 'url': 'https://packages.microsoft.com/keys/microsoft.asc', 'keyring': '/etc/apt/trusted.gpg.d/microsoft.gpg'}]
        repositories: []
        packages: [{'name': 'azure-cli'}, {'name': 'powershell'}]
    when: (ansible_facts['os_family'] | lower == "debian")